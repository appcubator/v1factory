import simplejson

from json_schema import APP_SCHEMA
from validator import validate

def test(testing_state):
  errors = validate(testing_state, APP_SCHEMA)

  if len(errors) == 0:
    print "Success"
  else:
    print "Errors: %s" % repr(errors)

testing_state_json = r"""{"info":{"keywords":"","description":""},"entities":[{"name":"Post","fields":[{"name":"Title","type":"text","required":true},{"name":"Content","type":"text","required":true},{"name":"Comments","type":"{{Comment}}","required":true}],"forms":[{"name":"Create Post Form","fields":[{"name":"Title","displayType":"single-line-text","type":"text","label":"Title","placeholder":"Title","options":[]},{"name":"Content","displayType":"paragraph-text","type":"text","label":"Content","placeholder":"Content","options":[]},{"name":"Submit","type":"button","label":" ","displayType":"button","placeholder":"Submit","options":[]}],"action":"create","goto":"{{Posts Page}}","belongsTo":null}]},{"name":"Comment","fields":[{"name":"Content","type":"text","required":true},{"name":"Date","type":"text","required":true}],"forms":[{"name":"Create","fields":[{"name":"Content","displayType":"single-line-text","type":"text","label":"Content","placeholder":"Content","options":[]},{"name":"Submit","type":"button","label":" ","displayType":"button","placeholder":"Submit","options":[]},{"name":"Date","displayType":"single-line-text","type":"text","label":"Date","placeholder":"Date","options":[]}],"action":"create","goto":"{{Homepage}}","belongsTo":"{{Post.Comments}}"}]}],"users":{"name":"User","fields":[],"twitter":false,"linkedin":false,"forms":[{"action":"signup","fields":[{"name":"username","placeholder":"Username","label":"Username","displayType":"single-line-text","type":"text","options":[]},{"name":"password1","placeholder":"Password","label":"Password","displayType":"password-text","type":"password","options":[]},{"name":"password2","placeholder":"Confirm Password","label":"Confirm Password","displayType":"password-text","type":"password","options":[]},{"name":"email","placeholder":"Email Address","label":"Email Address","displayType":"email-text","type":"email","options":[]},{"name":"Sign Up","placeholder":"Sign Up","label":"Sign Up!","displayType":"button","type":"button","options":[]}],"name":"Sign Up","goto":"{{Homepage}}","belongsTo":null},{"action":"login","fields":[{"name":"username","placeholder":"Username","label":"Username","displayType":"single-line-text","type":"text","options":[]},{"name":"password","placeholder":"Password","label":"Password","displayType":"password-text","type":"password","options":[]},{"name":"Submit","placeholder":"Login","label":"Login","displayType":"button","type":"button","options":[]}],"name":"Local Login","goto":"{{Posts Page}}","belongsTo":null}],"facebook":false,"local":true},"pages":[{"url":{"urlparts":[]},"design_props":[{"type":"background-image","value":"/static/img/sample_bg.png"},{"type":"background-color","value":"#eee"},{"type":"text-color","value":"#000"},{"type":"text-size","value":"12px"},{"type":"text-family","value":"\"Helvetica Neue\", Helvetica, \"Lucida Grande\""},{"type":"header-color","value":"#666"},{"type":"header-size","value":"16px"},{"type":"header-family","value":"\"Helvetica Neue\", Helvetica, \"Lucida Grande\""}],"uielements":[{"style":"font-size: 32px;\nfont-weight: bold;","isSingle":false,"tagName":"h1","hoverStyle":"","class_name":"header-1","container_info":null,"content":"Welcome to your v1Factory app!","content_attribs":{},"layout":{"t-padding":15,"top":0,"height":6,"width":12,"b-padding":15,"alignment":"center","left":0},"type":"headerTexts","activeStyle":""},{"style":"","isSingle":false,"tagName":"span","hoverStyle":"","class_name":"txt","container_info":null,"content":"It's all up and running now. All you need to do is to create your forms and edit your pages.\n\nFeel free to ask questions at help@v1factory.com","content_attribs":{"style":"font-size:24px;"},"layout":{"t-padding":15,"r-padding":15,"top":6,"height":6,"width":12,"b-padding":15,"l-padding":15,"left":0},"type":"texts","activeStyle":""},{"style":"border-radius: 6px;\nwidth: 180px;","isSingle":true,"tagName":"img","hoverStyle":"","class_name":"img-height-fixed","container_info":null,"content":"","content_attribs":{"src":"https://www.filepicker.io/api/file/FuHnh0wR7WlGHM1yDhKA"},"layout":{"t-padding":15,"top":14,"height":22,"width":7,"b-padding":15,"alignment":"center","left":0},"type":"images","activeStyle":""},{"layout":{"top":31,"left":8,"height":5,"width":4},"style":"","isSingle":false,"content_attribs":{"href":"{{Registration Page}}","style":"font-size:20px;"},"hoverStyle":"","class_name":"link-1","content":"Registration Page >>","tagName":"a","activeStyle":"","type":"links","container_info":null},{"layout":{"top":51,"left":0,"height":4,"width":12,"alignment":"center"},"style":"","isSingle":false,"content_attribs":{},"hoverStyle":"","class_name":"txt","content":"Designed by Alper","tagName":"span","activeStyle":"","type":"texts","container_info":null},{"layout":{"top":14,"left":8,"height":17,"width":4},"container_info":{"entity":"User","action":"login","form":"{{Local Login}}","uielements":[]},"content_attribs":{},"content":""}],"name":"Homepage","access_level":"all","navbar":{"brandName":"Your App","isHidden":false,"isFixed":true,"items":[{"name":"{{Homepage}}"},{"name":"{{Registration Page}}"}]},"page_name":"Homepage","ind":0},{"url":{"urlparts":["registration"]},"design_props":[{"type":"background-image","value":"/static/img/sample_bg.png"},{"type":"background-color","value":"#eee"},{"type":"text-color","value":"#000"},{"type":"text-size","value":"12px"},{"type":"text-family","value":"\"Helvetica Neue\", Helvetica, \"Lucida Grande\""},{"type":"header-color","value":"#666"},{"type":"header-size","value":"16px"},{"type":"header-family","value":"\"Helvetica Neue\", Helvetica, \"Lucida Grande\""}],"uielements":[{"layout":{"top":0,"left":0,"height":5,"width":5},"style":"font-size: 32px;\nfont-weight: bold;","isSingle":false,"content_attribs":{},"hoverStyle":"","class_name":"header-1","content":"Registration Page","tagName":"h1","activeStyle":"","type":"headerTexts","container_info":null},{"layout":{"top":6,"left":0,"height":20,"width":5},"container_info":{"entity":"User","action":"signup","form":"{{Sign Up}}","uielements":[]},"content_attribs":{},"content":""}],"name":"Registration Page","access_level":"all","navbar":{"brandName":null,"isHidden":false,"isFixed":true,"items":[{"name":"{{Homepage}}"},{"name":"{{Registration Page}}"}]},"page_name":"Registration Page","ind":1},{"name":"Post Page","url":{"urlparts":["post","{{Post}}"]},"access_level":"users","uielements":[{"layout":{"top":0,"left":0,"height":4,"width":12,"alignment":"center"},"style":"","isSingle":false,"content_attribs":{"style":"font-size:32px;font-weight:bold;"},"hoverStyle":"","class_name":"txt","content":"{{Post_Title}}","tagName":"span","activeStyle":"","container_info":null},{"layout":{"top":5,"left":2,"height":22,"width":8},"style":"","isSingle":false,"content_attribs":{},"hoverStyle":"","class_name":"txt","content":"{{Post_Content}}","tagName":"span","activeStyle":"","container_info":null},{"layout":{"top":28,"left":2,"height":2,"width":8},"style":"","isSingle":false,"content_attribs":{"style":"font-weight:bold;"},"hoverStyle":"","class_name":"txt","content":"Add a Comment","tagName":"span","activeStyle":"","type":"texts","container_info":null},{"layout":{"top":31,"left":2,"height":16,"width":4},"container_info":{"entity":"Comment","action":"create","form":"{{Create}}","uielements":[]},"content_attribs":{},"content":""}],"navbar":{"brandName":null,"isHidden":false,"isFixed":true,"items":[]},"page_name":"Post Page","ind":2,"design_props":[]},{"name":"Posts Page","url":{"urlparts":["posts"]},"access_level":"users","uielements":[{"layout":{"top":51,"left":4,"height":16,"width":4},"style":"  display: inline-block;\n  *display: inline;\n  padding: 4px 12px;\n  margin-bottom: 0;\n  *margin-left: .3em;\n  font-size: 14px;\n  line-height: 20px;\n  color: #333333;\n  text-align: center;\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);\n  vertical-align: middle;\n  cursor: pointer;\n  background-color: #f5f5f5;\n  *background-color: #e6e6e6;\n  background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);\n  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6));\n  background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);\n  background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);\n  background-image: linear-gradient(to bottom, #ffffff, #e6e6e6);\n  background-repeat: repeat-x;\n  border: 1px solid #cccccc;\n  *border: 0;\n  border-color: #e6e6e6 #e6e6e6 #bfbfbf;\n  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);\n  border-bottom-color: #b3b3b3;\n  -webkit-border-radius: 4px;\n     -moz-border-radius: 4px;\n          border-radius: 4px;\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe6e6e6', GradientType=0);\n  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);\n  *zoom: 1;\n  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\n     -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\n          box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\n","isSingle":true,"content_attribs":{"value":"Button1"},"hoverStyle":"","class_name":"btn-1","content":"","tagName":"input","activeStyle":"","cons_attribs":{"type":"submit"},"type":"buttons","container_info":null},{"layout":{"top":0,"left":1,"height":43,"width":10},"container_info":{"entity":"Post","action":"show","uielements":[],"query":{"fieldsToDisplay":["Title","Content"],"belongsToUser":false,"sortAccordingTo":"Date","numberOfRows":0},"row":{"isListOrGrid":"list","layout":{"height":10,"width":6,"top":0,"left":0},"uielements":[{"layout":{"top":0,"left":0,"width":6,"height":3},"field":"c44","style":"","isSingle":false,"content_attribs":{},"hoverStyle":"","class_name":"txt","content":"{{Post_Title}}","tagName":"span","activeStyle":"","container_info":null},{"layout":{"top":3,"left":0,"width":6,"height":7},"field":"c45","style":"","isSingle":false,"content_attribs":{},"hoverStyle":"","class_name":"txt","content":"{{Post_Content}}","tagName":"span","activeStyle":"","container_info":null}],"goesTo":"{{Post Page}}"}},"content_attribs":{},"content":""}],"navbar":{"brandName":null,"isHidden":false,"isFixed":true,"items":[]},"page_name":"Posts Page","ind":3,"design_props":[]},{"name":"Create Post Page","url":{"urlparts":["createpost"]},"access_level":"users","uielements":[{"layout":{"top":0,"left":0,"height":5,"width":4},"style":"font-size: 32px;\nfont-weight: bold;","isSingle":false,"content_attribs":{},"hoverStyle":"","class_name":"header-1","content":"Create your post","tagName":"h1","activeStyle":"","type":"headerTexts","container_info":null},{"layout":{"top":15,"left":6,"height":16,"width":4},"style":"  display: inline-block;\n  *display: inline;\n  padding: 4px 12px;\n  margin-bottom: 0;\n  *margin-left: .3em;\n  font-size: 14px;\n  line-height: 20px;\n  color: #333333;\n  text-align: center;\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);\n  vertical-align: middle;\n  cursor: pointer;\n  background-color: #f5f5f5;\n  *background-color: #e6e6e6;\n  background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);\n  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6));\n  background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);\n  background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);\n  background-image: linear-gradient(to bottom, #ffffff, #e6e6e6);\n  background-repeat: repeat-x;\n  border: 1px solid #cccccc;\n  *border: 0;\n  border-color: #e6e6e6 #e6e6e6 #bfbfbf;\n  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);\n  border-bottom-color: #b3b3b3;\n  -webkit-border-radius: 4px;\n     -moz-border-radius: 4px;\n          border-radius: 4px;\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe6e6e6', GradientType=0);\n  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);\n  *zoom: 1;\n  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\n     -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\n          box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\n","isSingle":true,"content_attribs":{"value":"Button1"},"hoverStyle":"","class_name":"btn-1","content":"","tagName":"input","activeStyle":"","cons_attribs":{"type":"submit"},"type":"buttons","container_info":null},{"layout":{"top":5,"left":0,"height":16,"width":4},"container_info":{"entity":"Post","action":"create","form":"{{Create Post Form}}","uielements":[]},"content_attribs":{},"content":""}],"navbar":{"brandName":null,"isHidden":false,"isFixed":true,"items":[]},"page_name":"Create Post Page","ind":4,"design_props":[]}],"name":"YoloApp"}"""
testing_state = simplejson.loads(testing_state_json)

test(testing_state)
