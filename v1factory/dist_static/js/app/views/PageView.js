define(["app/views/UrlView","app/views/SimpleModalView","app/templates/PageTemplates","iui","backbone"],function(e,t){var n=Backbone.View.extend({el:null,tagName:"div",className:"page-view span20 hoff2 offsetr1 pane",expanded:!1,events:{"click .delete":"deletePage","change #access_level":"accessLevelChanged","click .edit-url":"renderUrl"},initialize:function(e,t){_.bindAll(this,"render","renderMenu","renderUrl","accessLevelChanged","deletePage"),this.model=e,this.ind=t,this.urlModel=e.get("url"),this.render(),this.renderMenu()},render:function(){var e={};e.page_name=this.model.get("name"),e.ind=this.ind;var t=_.template(PageTemplates.tempPage,e);this.el.innerHTML+=t},renderUrl:function(){var t=new e(this.urlModel)},renderMenu:function(){var e={};e=this.model.attributes,e.page_name=this.model.get("name"),e.ind=this.ind;var t=_.template(PageTemplates.tempMenu,e),n=document.createElement("span");n.innerHTML=t,this.el.appendChild(n)},accessLevelChanged:function(e){this.model.set("access_level",e.target.value)},deletePage:function(){if(this.model.get("name")=="Homepage"||this.model.get("name")=="Registration Page"){new t({text:"Hompage and Registration page are essential parts ofyour application and cannot be deleted."});return}this.model.collection.remove(this.model),this.remove()}});return n});