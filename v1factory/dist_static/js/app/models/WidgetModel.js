define(["app/models/ContentModel","app/models/LayoutModel","dicts/constant-containers"],function(e,t,n){var r=Backbone.Model.extend({selected:!1,defaults:{container_info:null,deletable:!0},initialize:function(n){var r=this;this.set("content_attribs",new e(this.get("content_attribs"))),this.set("layout",new t(this.get("layout"))),this.set("selected",!1),_.bindAll(this,"select","assignCoord","isFullWidth")},select:function(){this.collection.select(this),this.set("selected",!0)},remove:function(){if(this.get("deletable")===!1)return},toJSON:function(){var e=_.clone(this.attributes);return e=_.omit(e,"selected","deletable"),e.content_attribs=this.get("content_attribs").toJSON()||{},e.content=this.get("content")||"",e.layout=this.get("layout").toJSON(),e},isFullWidth:function(){return this.get("layout").get("isFull")===!0},moveLeft:function(){if(this.isFullWidth())return;if(this.get("layout").get("left")<1||this.collection.editMode)return;this.get("layout").set("left",this.get("layout").get("left")-1)},moveRight:function(){if(this.isFullWidth()||this.collection.editMode)return;if(this.get("layout").get("left")+this.get("layout").get("width")>11)return;this.get("layout").set("left",this.get("layout").get("left")+1)},moveUp:function(){if(this.get("layout").get("top")<1||this.collection.editMode)return;this.get("layout").set("top",this.get("layout").get("top")-1)},moveDown:function(){if(this.collection.editMode)return;this.get("layout").set("top",this.get("layout").get("top")+1)},assignCoord:function(){var e=currentCoord?iui.unite(currentCoord.initCor,currentCoord.lastCor):iui.unite({x:0,y:2},{x:16,y:10});this.get("layout").set("top",e.topLeft.y+1),this.get("layout").set("left",e.topLeft.x+1),this.get("layout").set("width",e.bottomRight.x-e.topLeft.x),this.get("layout").set("height",e.bottomRight.y-e.topLeft.y)}});return r});