define(["app/models/EntityModel","app/models/FieldModel","app/collections/FormCollection","app/collections/FieldsCollection","backbone"],function(e,t,n,r,i){var s=e.extend({defaults:{facebook:!1,linkedin:!1,local:!0},initialize:function(e){typeof e=="string"&&(e=appState.users);var t=new r;e&&t.add(e.fields),t.push({name:"First Name",required:!0,type:"text"}),t.push({name:"Last Name",required:!0,type:"text"}),this.set("fields",t),this.set("forms",new n),this.set("name","User"),e.forms&&this.get("forms").add(e.forms)},toJSON:function(){var e={};return e=_.clone(this.attributes),e.fields=this.get("fields").toJSON(),e.fields=_.uniq(e.fields,function(e){return e.name}),e.fields=_.filter(e.fields,function(e){return e.name!="First Name"&&e.name!="Last Name"}),e.forms=this.get("forms").toJSON(),e},getFormWithName:function(e){var t=/\{\{([^\}]+)\}\}/g.exec(e)[1],n=this.get("forms").where({name:t})[0];return n}});return s});