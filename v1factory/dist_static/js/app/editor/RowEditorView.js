define(["editor/WidgetView","editor/WidgetEditorView","mixins/BackboneModal"],function(e,t){var n=Backbone.View.extend({el:null,className:"row-editor-view page",events:{keydown:"keydown"},initialize:function(e,n){_.bindAll(this,"render","placeWidget","removedWidget","resizing","keydown");var r=this;this.rowModel=e,this.entity=n,this.widgetsCollection=e.get("uielements"),this.widgetsCollection.bind("add",this.placeWidget),this.render(),_(r.widgetsCollection.models).each(function(e){r.placeWidget(e)}),this.widgetEditorView=new t(this.widgetsCollection,null)},render:function(){var e=this;this.el.innerHTML="<h3>List Editor</h3>";var t=document.createElement("div");return this.rowWidget=t,t.className="editor-window container-wrapper",t.className+=" hi"+this.rowModel.get("layout").get("height"),this.rowModel.get("isListOrGrid")=="list"?(iui.resizableVertical(t,e),t.style.width="100%"):(iui.resizable(t,e),t.className+=" span"+this.rowModel.get("layout").get("width")),this.el.appendChild(t),this},placeWidget:function(t){var n=new e(t);t.isFullWidth()||this.rowWidget.appendChild(n.el),n.resizableAndDraggable()},removedWidget:function(e){var t=this,n=String(e).replace("field-",""),r=this.widgetsCollection.where({field:n})[0];if(!r){var i=this.entity.get("fields").get(n);r=this.widgetsCollection.where({content:"{{"+t.entity.get("name")+"."+i.get("name")+"}}"})[0]}this.widgetsCollection.remove(r),$("#widget-wrapper-"+r.cid).remove(),r.remove()},resizing:function(e,t){var n=(t.size.height+2)/GRID_HEIGHT,r=(t.size.width+2)/GRID_WIDTH,i=Math.round((t.size.height+2)/GRID_HEIGHT),s=Math.round((t.size.width+2)/GRID_WIDTH);this.rowModel.get("layout").set("width",s),this.rowModel.get("layout").set("height",i)},keydown:function(e){}});return n});