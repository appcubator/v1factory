define(["mixins/BackboneModal"],function(){var e=Backbone.ModalView.extend({el:document.getElementById("class-picker"),width:800,events:{"click .class-name-item":"classChanged"},initialize:function(e){_.bindAll(this,"render","clear","selectChanged","classChanged"),this.model=e,this.render()},classChanged:function(e){var t=e.target.id||e.target.parentNode.id;this.model.set("class_name",t),this.closeModal()},selectChanged:function(e,t){this.widgetsCollection.selectedEl===null?this.model=null:this.widgetsCollection.selectedEl!=this.model&&(this.clear(),this.model=this.widgetsCollection.selectedEl,this.render())},render:function(){var e=this;this.list=document.createElement("ul"),this.list.className="class-picker";var t=this.model.get("type");_(uieState[t]).each(function(n){var r=document.createElement("li");r.className="class-name-item",e.model.get("class_name")==n.class_name&&(r.className+=" selected"),r.id=n.class_name,t=="yolo"?r.innerHTML=n.name||n.class_name:r.innerHTML='<div class="node" id="'+n.class_name+'">'+e.renderNode(n)+"</div>",e.list.appendChild(r)}),this.el.appendChild(this.list)},renderNode:function(e){var t=Templates.tempNode,n=_.template(t,{element:e});return n},clear:function(){this.el.innerHTML="",this.model=null}});return e});