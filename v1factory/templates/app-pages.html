{% extends "infra-html.html" %}

{% block css %}
<script type="text/javascript" src="//use.typekit.net/kqa1all.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/reset.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/website.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/entities.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/design.css">
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css">
<script type="text/javascript" src="{{ STATIC_URL }}js/jscolor/jscolor.js"></script>
{% endblock %}

{% block topbar %}
<div class="row hi4" style="position:fixed; background-color:#000; opacity:0.8; top:0; left:0; z-index:1; width:100%;">
  <div class="container">
    <div class="toppanel span18 logo-text" style="">
      <h1 class="name hoff1"><a href="{% url v1factory.views.app_list %}">v1 Factory</a> | {{ title }}</h1>
    </div>
    <div class="offset4 toppanel hi6 span30">
      <div class="login hi2 pad1" style="height:45px; margin-top: 10px;">
        hey
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block page %}
<div class="well" style="background-color:#26656e;">
  <div class="container hoff5">
    <div class="span58">
      <div class="hi4">
        <div class="" style="color:#0f2d40;">
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
        </div>
      </div>
    </div>
    <div class="span6">
      <a class="btn span6" id="save-entities">Save</a>
      <a class="btn span6 btn-reset">Reset</a>
    </div>
  </div>
</div>

<div class="container" id="pages-view">
  <div class="row" id="list-pages">
  </div>
  <div class="hi7 page-view span64 hoff2 pane create-page" style="margin-bottom:60px;">
    <div class="">
      <h2 class="offset1 hoff3">+ Create a New Page</h2>
    </div>
    <div class="row offset1"></div>
  </div>
  <form class="hi7 page-view span64 hoff2 pane create-form" style="display:none;">
    <div class="offset1 hoff3">
      <input type="text" class="page-name" placeholder="Page Name">
    </div>
    <div class="row offset1"></div>
  </form>
</div>
<script>
var appState = {{ app.state_json|safe }};
var appId = {{ app_id|safe }};
</script>

<script type="text/html" id="temp-page">
  <div class="hi4">
    <h2 class="offset1 span16 hoff2"><%= page_name %></h>

  </div>
</script>

<script type="text/html" id="template-url">
      <hr class="span60">
      <h3 class="hi3 span8 hoff1">URL</h3>
      <div class="hi3 span44 hoff1">
        <div class="span44 url">
        <% var endsWithEnt = 1;
           _.each(urls, function(url, i) { %>
          <span class="slash">/</span>
          <% if (/\{\{([^\}]+)}}/g.exec(url)) { var urlEnt = /\{\{([^\}]+)}}/g.exec(url); endsWithEnt = 1 %>
          <select class="id url-part" id="inp-<%= i %>">
          <% _.each(entities, function(entity, i) { %>
            <option <% if(entity.name == urlEnt[1]) { %> selected <% } %> > <%= entity.name %> ID</option>
          <% }); %>
            <option>Add ID</option>
          </select>
          <% } else { endsWithEnt = 0; %>
          <input type="text" class="url-part" placeholder="url_string" id="inp-<%= i %>" value='<%= url %>'>
          <% } %>
        <% }); %>

        <% if(!endsWithEnt) {%>
          <span class="slash">/</span>
          <select class="id url-part last" id="inp-new" %>>
            <option>Add ID</option>
            <option value="User"> User ID</option>
            <% _.each(entities, function(entity, i) { %>
              <option value="<%= entity.name %>"> <%= entity.name %> ID </option>
            <% }); %>
          </select>
        <% } else {%>
          <span class="slash">/</span>
          <input type="text" class="url-part last" id="inp-new" placeholder="url_string" value=''>
        <% } %>
        </div>
      </div>
</script>


<script type="text/html" id="temp-menu">

<hr class="span60 offset1">
<h3 class="hi3 span12 hoff1 offset1">Access Level</h3>
<div>
  <select class="span8 hoff1" id="access_level">
    <option <% if(access_level == 'all') { %> selected <% } %> value="all">Everyone</option>
    <option <% if(access_level == 'users') { %> selected <% } %> value="users">Only Users</option>
  </select>
</div>
<hr class="span60 offset1">
<div class="offset1 span12 hi3">
  <a class="btn edit" href="editor/<%= ind %>">Start Editing</a>
</div>
<div class="offset1 span12 hi3">
  <a class="btn delete">Delete Page</a>
</div>
</script>


<script type="text/html" id="template-entity">
<span class="slash">/</span>
<select class="id url-part last" id="inp-new" %>>
  <option>Add ID</option>
  <option value="User"> User ID</option>
  <% _.each(entities, function(entity, i) { %>
  <option value="<%= entity.name %>"> <%= entity.name %> ID</option>
  <% }); %>
</select>
</script>
{% endblock %}

{% block js %}

<script type="text/javascript" src="{{ STATIC_URL }}js/libs/iui.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/app/models.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/app/collections.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/app/urls-view.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/app/pages-view.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/app/editor-modules/editor-pages.js"></script>
<!-- <script type="text/javascript" src="{{ STATIC_URL }}js/app/editor-modules/editor-design-view.js"></script>
 -->
 <script type="text/javascript" src="{{ STATIC_URL }}js/dicts/design-options.js"></script>

<script type="text/javascript">
var pagesView = new PagesView();
</script>
<script type="text/javascript"></script>

{% endblock %}
