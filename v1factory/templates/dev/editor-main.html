{% extends "infra-html.html" %}

{% block css %}
<link href="{{ STATIC_URL }}css/reset.css" rel="stylesheet">
<link href="{{ STATIC_URL }}css/editor.css" rel="stylesheet">
<link href="{{ STATIC_URL }}css/bootstrap.css" rel="stylesheet">
<link href="{{ STATIC_URL }}css/design.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css">
<style type="text/css">
{% for element in elements %}
.{{element.class_name }} {
{{ element.css|safe }}
}
{% endfor %}
</style>
{% endblock %}

{% block navbar %}
<div class="navbar navbar-inverse navbar-fixed-top editing">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Project name</a>
    </div>
  </div>
</div>
{% endblock %}

{% block page %}
  <div class="container editing" id="elements-container">
    <div class="elements-inside-container" id="widgets-container"></div>
  </div>
  <div class="container editing" id="body-container">
    {% include "dev/editor-gallery.html" %}
  </div>
  {% include "dev/editor-left.html" %}
  {% include "dev/editor-right.html" %}

  <div class="loading-gif" id="loading-gif">
    <div class="logo offsetr2 hoff1">
      <span class="engine1"></span>
      <span class="engine2"></span>
    </div>
  </div>
{% endblock %}

{% block js %}
<script type="text/javascript">
var appState = {{ app.state_json|safe }};
var statics = {{ statics|safe }};
var pageId = {{ page_id }};
</script>
{% include "dev/editor-templates.html" %}
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/iui.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/models.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/design-options.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/editor-grid.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/editor-widgets.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/editor-entities.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/editor-info.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/editor-list.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/editor-pages.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/pages-models.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/design-options.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/design-editor.js"></script>
<script type="text/javascript">
var gridEditor     = new GridEditorView();
var pagesView      = new PagesView();
var widgetInfoView = new WidgetInfoView();
pagesView.openPage(pageId);
var designEditor = new DesignEditorView(new PageModel(appState.pages[pageId]));

$(function() {$( "#item-info-section" ).draggable();});
</script>
<script type="text/javascript">
var mY = 0;
$('body').mousemove(function(e) {
    var top = e.pageY - $(window).scrollTop();
    // moving upward
    if (e.pageY > mY && top > 450) {
      $('.entities').css('margin-bottom', 0)
      $('.menu').css('margin-bottom', 0)
    }

    if (e.pageY < mY && top < 450) {
      $('.entities').css('margin-bottom', -140)
      $('.menu').css('margin-bottom', -140)
    }

    // set new mY after doing test above
    mY = e.pageY;
});

$('.entities').css('margin-bottom', -140);
$('.menu').css('margin-bottom', -140);


</script>
{% endblock %}

